{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "schemas/AdapterResponse.json",
  "title": "AdapterResponse",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "text": { "type": "string" },
    "parsed_json": { "type": ["object", "null"], "description": "Adapter-parsed JSON when available" },
    "tokens": { "type": ["integer", "null"] },
    "model_metadata": { "type": ["object", "null"] },
    "adapter_provenance": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "adapter_id": { "type": "string" },
        "version": { "type": "string" },
        "prompt_template_id": { "type": ["string", "null"] },
        "request_id": { "type": "string" },
        "raw_output_summary": { "type": ["string", "null"] }
      },
      "required": ["adapter_id", "version", "request_id"]
    }
  },
  "required": ["text", "adapter_provenance"]
}